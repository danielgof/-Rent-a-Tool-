{"ast":null,"code":"var _jsxFileName = \"/home/daniel/Documents/CS/Projects/RaT/RaT2.0/client/web/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport LogInPage from \"components/Auth/LogInPage\";\nimport RegisterPage from \"components/Auth/RegisterPage\";\nimport DashboardPage from \"components/Dashboard/DashboardPage\";\nimport NavBar from \"components/NavBar/NavBar\";\nimport PrivateWrapper from \"components/PrivateWrapper\";\nimport MainPage from \"components/MainPage/MainPage\";\nimport { ServerAPI_GET } from \"libs/ServerAPI\";\nimport { DeleteToken, HasToken } from \"libs/Token\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"redux/hooks\";\nimport { selectUser, setUserData } from \"redux/slices/userSlice\";\nimport \"./App.css\";\nimport DonatePage from \"components/Donate/DonatePage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const user = useAppSelector(selectUser);\n  const dispatch = useAppDispatch();\n  const tryLogin = () => {\n    console.log(\"TryLogin\");\n    if (HasToken()) {\n      ServerAPI_GET({\n        url: \"http://localhost:5000/api/v1/auth/user\",\n        onDataReceived: data => {\n          if (data.access_token === undefined) {\n            console.log(data);\n            dispatch(setUserData({\n              isAuth: true,\n              ...data\n            }));\n          } else {\n            dispatch(setUserData({\n              isAuth: false\n            }));\n          }\n        },\n        handleStatus: res => {\n          if (res.status = 403) {\n            console.log(res);\n            DeleteToken();\n            dispatch(setUserData({\n              isAuth: false\n            }));\n          }\n        },\n        handleServerError: () => {\n          console.log(\"Error\");\n          DeleteToken();\n          dispatch(setUserData({\n            isAuth: false\n          }));\n        }\n      });\n    } else dispatch(setUserData({\n      isAuth: false\n    }));\n  };\n  useEffect(() => {\n    tryLogin();\n    //const data = { username: \"Никнейм\" };\n    //dispatch(setUserData({ isAuth: true, ...data }));\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    if (user.isAuth === true) {}\n  }, [user.isAuth]);\n  const NavigateIfLoged = comp => {\n    return user.isAuth ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 30\n    }, this) : comp;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      drawAuth: user.isAuth !== undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this), user.isAuth === undefined ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: NavigateIfLoged( /*#__PURE__*/_jsxDEV(MainPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 70\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: NavigateIfLoged( /*#__PURE__*/_jsxDEV(LogInPage, {\n              tryLogin: tryLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 75\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/register\",\n            element: NavigateIfLoged( /*#__PURE__*/_jsxDEV(RegisterPage, {\n              tryLogin: tryLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 78\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            element: /*#__PURE__*/_jsxDEV(PrivateWrapper, {\n              condition: user.isAuth\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 45\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/dashboard\",\n              element: /*#__PURE__*/_jsxDEV(DashboardPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 67\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this)\n    }, void 0, false), /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/donate/:streamer\",\n        element: /*#__PURE__*/_jsxDEV(DonatePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 58\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"q0wMroMhXys7i019AJWgTHDCllg=\", false, function () {\n  return [useAppSelector, useAppDispatch];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","LogInPage","RegisterPage","DashboardPage","NavBar","PrivateWrapper","MainPage","ServerAPI_GET","DeleteToken","HasToken","Routes","Route","Navigate","useAppDispatch","useAppSelector","selectUser","setUserData","DonatePage","App","user","dispatch","tryLogin","console","log","url","onDataReceived","data","access_token","undefined","isAuth","handleStatus","res","status","handleServerError","NavigateIfLoged","comp"],"sources":["/home/daniel/Documents/CS/Projects/RaT/RaT2.0/client/web/src/App.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport LogInPage from \"components/Auth/LogInPage\";\nimport RegisterPage from \"components/Auth/RegisterPage\";\nimport DashboardPage from \"components/Dashboard/DashboardPage\";\nimport NavBar from \"components/NavBar/NavBar\";\nimport PrivateWrapper from \"components/PrivateWrapper\";\nimport MainPage from \"components/MainPage/MainPage\";\nimport { ServerAPI_GET } from \"libs/ServerAPI\";\nimport { DeleteToken, HasToken } from \"libs/Token\";\nimport { Routes, Route, Navigate } from \"react-router-dom\";\nimport { useAppDispatch, useAppSelector } from \"redux/hooks\";\nimport { selectUser, setUserData } from \"redux/slices/userSlice\";\nimport \"./App.css\";\nimport DonatePage from \"components/Donate/DonatePage\";\n\nconst App = () => {\n    const user = useAppSelector(selectUser);\n    const dispatch = useAppDispatch();\n\n    const tryLogin = () => {\n        console.log(\"TryLogin\");\n        if (HasToken()) {\n            ServerAPI_GET({\n                url: \"http://localhost:5000/api/v1/auth/user\",\n                onDataReceived: (data) => {\n                    if (data.access_token === undefined) {\n                        console.log(data);\n                        dispatch(setUserData({ isAuth: true, ...data }));\n                    } else {\n                        dispatch(setUserData({ isAuth: false }));\n                    }\n                },\n                handleStatus: (res) => {\n                    if ((res.status = 403)) {\n                        console.log(res);\n                        DeleteToken();\n                        dispatch(setUserData({ isAuth: false }));\n                    }\n                },\n                handleServerError: () => {\n                    console.log(\"Error\");\n                    DeleteToken();\n                    dispatch(setUserData({ isAuth: false }));\n                },\n            });\n        } else dispatch(setUserData({ isAuth: false }));\n    };\n\n    useEffect(() => {\n        tryLogin();\n        //const data = { username: \"Никнейм\" };\n        //dispatch(setUserData({ isAuth: true, ...data }));\n\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    useEffect(() => {\n        if (user.isAuth === true) {\n        }\n    }, [user.isAuth]);\n\n    const NavigateIfLoged = (comp: React.ReactNode) => {\n        return user.isAuth ? <Navigate to=\"/dashboard\" /> : comp;\n    };\n\n    return (\n        <div className=\"App\">\n            <NavBar drawAuth={user.isAuth !== undefined} />\n            {user.isAuth === undefined ? (\n                <></>\n            ) : (\n                <>\n                    <div className=\"container\">\n                        <Routes>\n                            <Route path=\"/\" element={NavigateIfLoged(<MainPage />)} />\n                            <Route path=\"/login\" element={NavigateIfLoged(<LogInPage tryLogin={tryLogin} />)} />\n                            <Route path=\"/register\" element={NavigateIfLoged(<RegisterPage tryLogin={tryLogin} />)} />\n                            <Route element={<PrivateWrapper condition={user.isAuth} />}>\n                                <Route path=\"/dashboard\" element={<DashboardPage />} />\n                            </Route>\n                        </Routes>\n                    </div>\n                    {/* <input type=\"button\" value=\"T\" onClick={() => console.log(GetToken())} /> */}\n                </>\n            )}\n            <Routes>\n                <Route path=\"/donate/:streamer\" element={<DonatePage />} />\n            </Routes>\n        </div>\n    );\n};\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,aAAa,MAAM,oCAAoC;AAC9D,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,OAAOC,cAAc,MAAM,2BAA2B;AACtD,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,WAAW,EAAEC,QAAQ,QAAQ,YAAY;AAClD,SAASC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AAC1D,SAASC,cAAc,EAAEC,cAAc,QAAQ,aAAa;AAC5D,SAASC,UAAU,EAAEC,WAAW,QAAQ,wBAAwB;AAChE,OAAO,WAAW;AAClB,OAAOC,UAAU,MAAM,8BAA8B;AAAC;AAAA;AAEtD,MAAMC,GAAG,GAAG,MAAM;EAAA;EACd,MAAMC,IAAI,GAAGL,cAAc,CAACC,UAAU,CAAC;EACvC,MAAMK,QAAQ,GAAGP,cAAc,EAAE;EAEjC,MAAMQ,QAAQ,GAAG,MAAM;IACnBC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAC;IACvB,IAAId,QAAQ,EAAE,EAAE;MACZF,aAAa,CAAC;QACViB,GAAG,EAAE,wCAAwC;QAC7CC,cAAc,EAAGC,IAAI,IAAK;UACtB,IAAIA,IAAI,CAACC,YAAY,KAAKC,SAAS,EAAE;YACjCN,OAAO,CAACC,GAAG,CAACG,IAAI,CAAC;YACjBN,QAAQ,CAACJ,WAAW,CAAC;cAAEa,MAAM,EAAE,IAAI;cAAE,GAAGH;YAAK,CAAC,CAAC,CAAC;UACpD,CAAC,MAAM;YACHN,QAAQ,CAACJ,WAAW,CAAC;cAAEa,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;UAC5C;QACJ,CAAC;QACDC,YAAY,EAAGC,GAAG,IAAK;UACnB,IAAKA,GAAG,CAACC,MAAM,GAAG,GAAG,EAAG;YACpBV,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;YAChBvB,WAAW,EAAE;YACbY,QAAQ,CAACJ,WAAW,CAAC;cAAEa,MAAM,EAAE;YAAM,CAAC,CAAC,CAAC;UAC5C;QACJ,CAAC;QACDI,iBAAiB,EAAE,MAAM;UACrBX,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;UACpBf,WAAW,EAAE;UACbY,QAAQ,CAACJ,WAAW,CAAC;YAAEa,MAAM,EAAE;UAAM,CAAC,CAAC,CAAC;QAC5C;MACJ,CAAC,CAAC;IACN,CAAC,MAAMT,QAAQ,CAACJ,WAAW,CAAC;MAAEa,MAAM,EAAE;IAAM,CAAC,CAAC,CAAC;EACnD,CAAC;EAED7B,SAAS,CAAC,MAAM;IACZqB,QAAQ,EAAE;IACV;IACA;;IAEA;EACJ,CAAC,EAAE,EAAE,CAAC;EAENrB,SAAS,CAAC,MAAM;IACZ,IAAImB,IAAI,CAACU,MAAM,KAAK,IAAI,EAAE,CAC1B;EACJ,CAAC,EAAE,CAACV,IAAI,CAACU,MAAM,CAAC,CAAC;EAEjB,MAAMK,eAAe,GAAIC,IAAqB,IAAK;IAC/C,OAAOhB,IAAI,CAACU,MAAM,gBAAG,QAAC,QAAQ;MAAC,EAAE,EAAC;IAAY;MAAA;MAAA;MAAA;IAAA,QAAG,GAAGM,IAAI;EAC5D,CAAC;EAED,oBACI;IAAK,SAAS,EAAC,KAAK;IAAA,wBAChB,QAAC,MAAM;MAAC,QAAQ,EAAEhB,IAAI,CAACU,MAAM,KAAKD;IAAU;MAAA;MAAA;MAAA;IAAA,QAAG,EAC9CT,IAAI,CAACU,MAAM,KAAKD,SAAS,gBACtB,qCAAK,gBAEL;MAAA,uBACI;QAAK,SAAS,EAAC,WAAW;QAAA,uBACtB,QAAC,MAAM;UAAA,wBACH,QAAC,KAAK;YAAC,IAAI,EAAC,GAAG;YAAC,OAAO,EAAEM,eAAe,eAAC,QAAC,QAAQ;cAAA;cAAA;cAAA;YAAA,QAAG;UAAE;YAAA;YAAA;YAAA;UAAA,QAAG,eAC1D,QAAC,KAAK;YAAC,IAAI,EAAC,QAAQ;YAAC,OAAO,EAAEA,eAAe,eAAC,QAAC,SAAS;cAAC,QAAQ,EAAEb;YAAS;cAAA;cAAA;cAAA;YAAA,QAAG;UAAE;YAAA;YAAA;YAAA;UAAA,QAAG,eACpF,QAAC,KAAK;YAAC,IAAI,EAAC,WAAW;YAAC,OAAO,EAAEa,eAAe,eAAC,QAAC,YAAY;cAAC,QAAQ,EAAEb;YAAS;cAAA;cAAA;cAAA;YAAA,QAAG;UAAE;YAAA;YAAA;YAAA;UAAA,QAAG,eAC1F,QAAC,KAAK;YAAC,OAAO,eAAE,QAAC,cAAc;cAAC,SAAS,EAAEF,IAAI,CAACU;YAAO;cAAA;cAAA;cAAA;YAAA,QAAI;YAAA,uBACvD,QAAC,KAAK;cAAC,IAAI,EAAC,YAAY;cAAC,OAAO,eAAE,QAAC,aAAa;gBAAA;gBAAA;gBAAA;cAAA;YAAI;cAAA;cAAA;cAAA;YAAA;UAAG;YAAA;YAAA;YAAA;UAAA,QACnD;QAAA;UAAA;UAAA;UAAA;QAAA;MACH;QAAA;QAAA;QAAA;MAAA;IACP,iBAGb,eACD,QAAC,MAAM;MAAA,uBACH,QAAC,KAAK;QAAC,IAAI,EAAC,mBAAmB;QAAC,OAAO,eAAE,QAAC,UAAU;UAAA;UAAA;UAAA;QAAA;MAAI;QAAA;QAAA;QAAA;MAAA;IAAG;MAAA;MAAA;MAAA;IAAA,QACtD;EAAA;IAAA;IAAA;IAAA;EAAA,QACP;AAEd,CAAC;AAAC,GA3EIX,GAAG;EAAA,QACQJ,cAAc,EACVD,cAAc;AAAA;AAAA,KAF7BK,GAAG;AA6ET,eAAeA,GAAG;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}